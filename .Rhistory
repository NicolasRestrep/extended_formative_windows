student_2 = ifelse(is.na(student_2), student_1, student_2),
student_3 = ifelse(is.na(student_3), student_2, student_3),
student_4 = ifelse(is.na(student_4), student_3, student_4)) %>%
#Roll-backward imputation
mutate(marital_3 = ifelse(is.na(marital_3), marital_4, marital_3),
marital_2 = ifelse(is.na(marital_2), marital_3, marital_2),
marital_1 = ifelse(is.na(marital_1), marital_2, marital_1),
kidinhouse_3 = ifelse(is.na(kidinhouse_3), kidinhouse_4, kidinhouse_3),
kidinhouse_2 = ifelse(is.na(kidinhouse_2), kidinhouse_3, kidinhouse_2),
kidinhouse_1 = ifelse(is.na(kidinhouse_1), kidinhouse_2, kidinhouse_1),
ed_3 = ifelse(is.na(ed_3), ed_4, ed_3),
ed_2 = ifelse(is.na(ed_2), ed_3, ed_2),
ed_1 = ifelse(is.na(ed_1), ed_2, ed_1),
sex_3 = ifelse(is.na(sex_3), sex_4, sex_3),
sex_2 = ifelse(is.na(sex_2), sex_3, sex_2),
sex_1 = ifelse(is.na(sex_1), sex_2, sex_1),
race_3 = ifelse(is.na(race_3), race_4, race_3),
race_2 = ifelse(is.na(race_2), race_3, race_2),
race_1 = ifelse(is.na(race_1), race_2, race_1),
student_3 = ifelse(is.na(student_3), student_4, student_3),
student_2 = ifelse(is.na(student_2), student_3, student_2),
student_1 = ifelse(is.na(student_1), student_2, student_1)) %>%
select(id, marital_1:student_4) %>%
mutate_all(as.character) %>%
pivot_longer(marital_1:student_4) %>%
separate(name, into = c("measure", "wave")) %>%
pivot_wider(
names_from = measure,
values_from = value
)%>%
mutate(df = "2016-20 ANES")
# ANES 2020 demographics ====
# Here, we only have info for one time
# for all demographic variables
# We also don't have information about number of children
# We don't have information here about current student (employment) status
anes20_demog <- anes20 %>%
mutate(
id = 1:nrow(.),
# Marriage
marital_1 = case_when(
profile_marital == 1 ~ "married",
profile_marital == 5 ~ "single/nm",
profile_marital %in% c(2,3,4,6) ~ "other"
),
marital_2 = marital_1,
marital_3 = marital_2,
# It seems we don't have information about children
#Series of "people in household aged X-y questions
nkids_1 = profile_hh01 + profile_hh25 + profile_hh612 +
profile_hh1317,
kidinhouse_1 = ifelse(nkids_1 > 0, 1, 0),
kidinhouse_2 = NA,
kidinhouse_3 = NA,
# Education
ed_1 = case_when(
profile_educ5 == 1 ~ "less than",
profile_educ5 %in% c(2,3) ~ "hs",
profile_educ5 %in% c(4,5) ~ "ba"
),
ed_2 = ed_1,
ed_3 = ed_2,
# Sex
sex_1 = profile_gender,
sex_2 = sex_1,
sex_3 = sex_2,
# Race
race_1 = case_when(
profile_racethnicity == 1 ~ 1,
profile_racethnicity == 2 ~ 2,
profile_racethnicity %in% c(3,4) ~ 3
),
race_2 = race_1,
race_3 = race_2,
student_1 = ifelse(profile_employ == 7, 1, 0),
student_2 = student_1,
student_3 = student_2
) %>%
#Roll-forward imputation
mutate(marital_2 = ifelse(is.na(marital_2), marital_1, marital_2),
marital_3 = ifelse(is.na(marital_3), marital_2, marital_3),
kidinhouse_2 = ifelse(is.na(kidinhouse_2), kidinhouse_1, kidinhouse_2),
kidinhouse_3 = ifelse(is.na(kidinhouse_3), kidinhouse_2, kidinhouse_3),
ed_2 = ifelse(is.na(ed_2), ed_1, ed_2),
ed_3 = ifelse(is.na(ed_3), ed_2, ed_3),
sex_2 = ifelse(is.na(sex_2), sex_1, sex_2),
sex_3 = ifelse(is.na(sex_3), sex_2, sex_3),
race_2 = ifelse(is.na(race_2), race_1, race_2),
race_3 = ifelse(is.na(race_3), race_2, race_3),
student_2 = ifelse(is.na(student_2), student_1, student_2),
student_3 = ifelse(is.na(student_3), student_2, student_3)) %>%
#Roll-backward imputation
mutate(marital_2 = ifelse(is.na(marital_2), marital_3, marital_2),
marital_1 = ifelse(is.na(marital_1), marital_2, marital_1),
kidinhouse_2 = ifelse(is.na(kidinhouse_2), kidinhouse_3, kidinhouse_2),
kidinhouse_1 = ifelse(is.na(kidinhouse_1), kidinhouse_2, kidinhouse_1),
ed_2 = ifelse(is.na(ed_2), ed_3, ed_2),
ed_1 = ifelse(is.na(ed_1), ed_2, ed_1),
sex_2 = ifelse(is.na(sex_2), sex_3, sex_2),
sex_1 = ifelse(is.na(sex_1), sex_2, sex_1),
race_2 = ifelse(is.na(race_2), race_3, race_2),
race_1 = ifelse(is.na(race_1), race_2, race_1),
student_2 = ifelse(is.na(student_2), student_3, student_2),
student_1 = ifelse(is.na(student_1), student_2, student_1)) %>%
select(id, marital_1:student_3) %>%
mutate_all(as.character) %>%
pivot_longer(marital_1:student_3) %>%
separate(name, into = c("measure", "wave")) %>%
pivot_wider(
names_from = measure,
values_from = value
)%>%
mutate(df = "2020-22 ANES")
# GSS 2006-2010 demographics ====
gss6_demog <- gss6 %>%
zap_labels() %>%
mutate(id = 1:nrow(.)) %>%
select(id,
age_1, age_2, age_3,
marital_1, marital_2, marital_3,
childs_1, childs_2, childs_3,
babies_1, babies_2, babies_3,
preteen_1, preteen_2, preteen_3,
teens_1, teens_2, teens_3,
degree_1, degree_2, degree_3,
sex_1, sex_2, sex_3,
race_1, race_2, race_3,
wrkstat_1, wrkstat_2, wrkstat_3
) %>%
mutate(age_1 = ifelse(is.na(age_1) & !is.na(age_2), age_2 - 2, age_1),
age_1 = ifelse(is.na(age_1) & !is.na(age_3), age_3 - 4, age_1)) %>%
mutate(marital_1 = recode(marital_1, "1"="married", "2"="other", "3"="other", "4"="other",
"5"="single/nm"),
marital_2 = recode(marital_2, "1"="married", "2"="other", "3"="other", "4"="other",
"5"="single/nm"),
marital_3 = recode(marital_3, "1"="married", "2"="other", "3"="other", "4"="other",
"5"="single/nm"),
everkid_1 = ifelse(childs_1 > 0, 1, 0),
everkid_2 = ifelse(childs_2 > 0, 1, 0),
everkid_3 = ifelse(childs_3 > 0, 1, 0),
nkids_1 = babies_1 + preteen_1 + teens_1,
kidinhouse_1 = ifelse(nkids_1 > 0, 1, 0),
nkids_2 = babies_2 + preteen_2 + teens_2,
kidinhouse_2 = ifelse(nkids_2 > 0, 1, 0),
nkids_3 = babies_3 + preteen_3 + teens_3,
kidinhouse_3 = ifelse(nkids_3 > 0, 1, 0),
ed_1 = recode(degree_1, "0"="less than", "1"="hs", "2"="hs",
"3"="ba", "4"="ba"),
ed_2 = recode(degree_2, "0"="less than", "1"="hs", "2"="hs",
"3"="ba", "4"="ba"),
ed_3 = recode(degree_3, "0"="less than", "1"="hs", "2"="hs",
"3"="ba", "4"="ba"),
student_1 = ifelse(wrkstat_1 == 6, 1, 0),
student_2 = ifelse(wrkstat_2 == 6, 1, 0),
student_3 = ifelse(wrkstat_3 == 6, 1, 0)
) %>%
#Roll-forward imputation
mutate(marital_2 = ifelse(is.na(marital_2), marital_1, marital_2),
marital_3 = ifelse(is.na(marital_3), marital_2, marital_3),
kidinhouse_2 = ifelse(is.na(kidinhouse_2), kidinhouse_1, kidinhouse_2),
kidinhouse_3 = ifelse(is.na(kidinhouse_3), kidinhouse_2, kidinhouse_3),
everkid_2 = ifelse(is.na(everkid_2), everkid_1, everkid_2),
everkid_3 = ifelse(is.na(everkid_3), everkid_2, everkid_3),
ed_2 = ifelse(is.na(ed_2), ed_1, ed_2),
ed_3 = ifelse(is.na(ed_3), ed_2, ed_3),
sex_2 = ifelse(is.na(sex_2), sex_1, sex_2),
sex_3 = ifelse(is.na(sex_3), sex_2, sex_3),
race_2 = ifelse(is.na(race_2), race_1, race_2),
race_3 = ifelse(is.na(race_3), race_2, race_3),
student_2 = ifelse(is.na(student_2), student_1, student_2),
student_3 = ifelse(is.na(student_3), student_2, student_3)) %>%
#Roll-backward imputation
mutate(marital_2 = ifelse(is.na(marital_2), marital_3, marital_2),
marital_1 = ifelse(is.na(marital_1), marital_2, marital_1),
kidinhouse_2 = ifelse(is.na(kidinhouse_2), kidinhouse_3, kidinhouse_2),
kidinhouse_1 = ifelse(is.na(kidinhouse_1), kidinhouse_2, kidinhouse_1),
everkid_2 = ifelse(is.na(everkid_2), everkid_3, everkid_2),
everkid_1 = ifelse(is.na(everkid_1), everkid_2, everkid_1),
ed_2 = ifelse(is.na(ed_2), ed_3, ed_2),
ed_1 = ifelse(is.na(ed_1), ed_2, ed_1),
sex_2 = ifelse(is.na(sex_2), sex_3, sex_2),
sex_1 = ifelse(is.na(sex_1), sex_2, sex_1),
race_2 = ifelse(is.na(race_2), race_3, race_2),
race_1 = ifelse(is.na(race_1), race_2, race_1),
student_2 = ifelse(is.na(student_2), student_3, student_2),
student_1 = ifelse(is.na(student_1), student_2, student_1)) %>%
select(id, marital_1:marital_3, sex_1:race_3, everkid_1:student_3) %>%
mutate_all(as.character) %>%
pivot_longer(marital_1:student_3) %>%
separate(name, into = c("measure", "wave")) %>%
pivot_wider(
names_from = measure,
values_from = value
) %>%
mutate(df = "2006-10 GSS")
# I am worried that some of the education statuses seem to be changing quite wildly
# GSS 2008-2012 demographics ====
gss8_demog <- gss8 %>%
zap_labels() %>%
mutate(id = 1:nrow(.)) %>%
select(id,
age_1, age_2, age_3,
marital_1, marital_2, marital_3,
childs_1, childs_2, childs_3,
babies_1, babies_2, babies_3,
preteen_1, preteen_2, preteen_3,
teens_1, teens_2, teens_3,
degree_1, degree_2, degree_3,
sex_1, sex_2, sex_3,
race_1, race_2, race_3,
wrkstat_1, wrkstat_2, wrkstat_3
) %>%
mutate(age_1 = ifelse(is.na(age_1) & !is.na(age_2), age_2 - 2, age_1),
age_1 = ifelse(is.na(age_1) & !is.na(age_3), age_3 - 4, age_1)) %>%
mutate(marital_1 = recode(marital_1, "1"="married", "2"="other", "3"="other", "4"="other",
"5"="single/nm"),
marital_2 = recode(marital_2, "1"="married", "2"="other", "3"="other", "4"="other",
"5"="single/nm"),
marital_3 = recode(marital_3, "1"="married", "2"="other", "3"="other", "4"="other",
"5"="single/nm"),
everkid_1 = ifelse(childs_1 > 0, 1, 0),
everkid_2 = ifelse(childs_2 > 0, 1, 0),
everkid_3 = ifelse(childs_3 > 0, 1, 0),
nkids_1 = babies_1 + preteen_1 + teens_1,
kidinhouse_1 = ifelse(nkids_1 > 0, 1, 0),
nkids_2 = babies_2 + preteen_2 + teens_2,
kidinhouse_2 = ifelse(nkids_2 > 0, 1, 0),
nkids_3 = babies_3 + preteen_3 + teens_3,
kidinhouse_3 = ifelse(nkids_3 > 0, 1, 0),
ed_1 = recode(degree_1, "0"="less than", "1"="hs", "2"="hs",
"3"="ba", "4"="ba"),
ed_2 = recode(degree_2, "0"="less than", "1"="hs", "2"="hs",
"3"="ba", "4"="ba"),
ed_3 = recode(degree_3, "0"="less than", "1"="hs", "2"="hs",
"3"="ba", "4"="ba"),
student_1 = ifelse(wrkstat_1 == 6, 1, 0),
student_2 = ifelse(wrkstat_2 == 6, 1, 0),
student_3 = ifelse(wrkstat_3 == 6, 1, 0)
) %>%
#Roll-forward imputation
mutate(marital_2 = ifelse(is.na(marital_2), marital_1, marital_2),
marital_3 = ifelse(is.na(marital_3), marital_2, marital_3),
kidinhouse_2 = ifelse(is.na(kidinhouse_2), kidinhouse_1, kidinhouse_2),
kidinhouse_3 = ifelse(is.na(kidinhouse_3), kidinhouse_2, kidinhouse_3),
everkid_2 = ifelse(is.na(everkid_2), everkid_1, everkid_2),
everkid_3 = ifelse(is.na(everkid_3), everkid_2, everkid_3),
ed_2 = ifelse(is.na(ed_2), ed_1, ed_2),
ed_3 = ifelse(is.na(ed_3), ed_2, ed_3),
sex_2 = ifelse(is.na(sex_2), sex_1, sex_2),
sex_3 = ifelse(is.na(sex_3), sex_2, sex_3),
race_2 = ifelse(is.na(race_2), race_1, race_2),
race_3 = ifelse(is.na(race_3), race_2, race_3),
student_2 = ifelse(is.na(student_2), student_1, student_2),
student_3 = ifelse(is.na(student_3), student_2, student_3)) %>%
#Roll-backward imputation
mutate(marital_2 = ifelse(is.na(marital_2), marital_3, marital_2),
marital_1 = ifelse(is.na(marital_1), marital_2, marital_1),
kidinhouse_2 = ifelse(is.na(kidinhouse_2), kidinhouse_3, kidinhouse_2),
kidinhouse_1 = ifelse(is.na(kidinhouse_1), kidinhouse_2, kidinhouse_1),
everkid_2 = ifelse(is.na(everkid_2), everkid_3, everkid_2),
everkid_1 = ifelse(is.na(everkid_1), everkid_2, everkid_1),
ed_2 = ifelse(is.na(ed_2), ed_3, ed_2),
ed_1 = ifelse(is.na(ed_1), ed_2, ed_1),
sex_2 = ifelse(is.na(sex_2), sex_3, sex_2),
sex_1 = ifelse(is.na(sex_1), sex_2, sex_1),
race_2 = ifelse(is.na(race_2), race_3, race_2),
race_1 = ifelse(is.na(race_1), race_2, race_1),
student_2 = ifelse(is.na(student_2), student_3, student_2),
student_1 = ifelse(is.na(student_1), student_2, student_1)) %>%
select(id, marital_1:marital_3, sex_1:race_3, everkid_1:student_3) %>%
mutate_all(as.character) %>%
pivot_longer(marital_1:student_3) %>%
separate(name, into = c("measure", "wave")) %>%
pivot_wider(
names_from = measure,
values_from = value
) %>%
mutate(df = "2008-12 GSS")
# Again some inconsistency with the education values here
# GSS 2010-2014 demographics ====
gss10_demog <- gss10 %>%
zap_labels() %>%
mutate(id = 1:nrow(.)) %>%
select(id,
age_1, age_2, age_3,
marital_1, marital_2, marital_3,
childs_1, childs_2, childs_3,
babies_1, babies_2, babies_3,
preteen_1, preteen_2, preteen_3,
teens_1, teens_2, teens_3,
degree_1, degree_2, degree_3,
sex_1, sex_2, sex_3,
race_1, race_2, race_3,
wrkstat_1, wrkstat_2, wrkstat_3
) %>%
mutate(age_1 = ifelse(is.na(age_1) & !is.na(age_2), age_2 - 2, age_1),
age_1 = ifelse(is.na(age_1) & !is.na(age_3), age_3 - 4, age_1)) %>%
mutate(marital_1 = recode(marital_1, "1"="married", "2"="other", "3"="other", "4"="other",
"5"="single/nm"),
marital_2 = recode(marital_2, "1"="married", "2"="other", "3"="other", "4"="other",
"5"="single/nm"),
marital_3 = recode(marital_3, "1"="married", "2"="other", "3"="other", "4"="other",
"5"="single/nm"),
everkid_1 = ifelse(childs_1 > 0, 1, 0),
everkid_2 = ifelse(childs_2 > 0, 1, 0),
everkid_3 = ifelse(childs_3 > 0, 1, 0),
nkids_1 = babies_1 + preteen_1 + teens_1,
kidinhouse_1 = ifelse(nkids_1 > 0, 1, 0),
nkids_2 = babies_2 + preteen_2 + teens_2,
kidinhouse_2 = ifelse(nkids_2 > 0, 1, 0),
nkids_3 = babies_3 + preteen_3 + teens_3,
kidinhouse_3 = ifelse(nkids_3 > 0, 1, 0),
ed_1 = recode(degree_1, "0"="less than", "1"="hs", "2"="hs",
"3"="ba", "4"="ba"),
ed_2 = recode(degree_2, "0"="less than", "1"="hs", "2"="hs",
"3"="ba", "4"="ba"),
ed_3 = recode(degree_3, "0"="less than", "1"="hs", "2"="hs",
"3"="ba", "4"="ba"),
student_1 = ifelse(wrkstat_1 == 6, 1, 0),
student_2 = ifelse(wrkstat_2 == 6, 1, 0),
student_3 = ifelse(wrkstat_3 == 6, 1, 0)
) %>%
#Roll-forward imputation
mutate(marital_2 = ifelse(is.na(marital_2), marital_1, marital_2),
marital_3 = ifelse(is.na(marital_3), marital_2, marital_3),
kidinhouse_2 = ifelse(is.na(kidinhouse_2), kidinhouse_1, kidinhouse_2),
kidinhouse_3 = ifelse(is.na(kidinhouse_3), kidinhouse_2, kidinhouse_3),
everkid_2 = ifelse(is.na(everkid_2), everkid_1, everkid_2),
everkid_3 = ifelse(is.na(everkid_3), everkid_2, everkid_3),
ed_2 = ifelse(is.na(ed_2), ed_1, ed_2),
ed_3 = ifelse(is.na(ed_3), ed_2, ed_3),
sex_2 = ifelse(is.na(sex_2), sex_1, sex_2),
sex_3 = ifelse(is.na(sex_3), sex_2, sex_3),
race_2 = ifelse(is.na(race_2), race_1, race_2),
race_3 = ifelse(is.na(race_3), race_2, race_3),
student_2 = ifelse(is.na(student_2), student_1, student_2),
student_3 = ifelse(is.na(student_3), student_2, student_3)) %>%
#Roll-backward imputation
mutate(marital_2 = ifelse(is.na(marital_2), marital_3, marital_2),
marital_1 = ifelse(is.na(marital_1), marital_2, marital_1),
kidinhouse_2 = ifelse(is.na(kidinhouse_2), kidinhouse_3, kidinhouse_2),
kidinhouse_1 = ifelse(is.na(kidinhouse_1), kidinhouse_2, kidinhouse_1),
everkid_2 = ifelse(is.na(everkid_2), everkid_3, everkid_2),
everkid_1 = ifelse(is.na(everkid_1), everkid_2, everkid_1),
ed_2 = ifelse(is.na(ed_2), ed_3, ed_2),
ed_1 = ifelse(is.na(ed_1), ed_2, ed_1),
sex_2 = ifelse(is.na(sex_2), sex_3, sex_2),
sex_1 = ifelse(is.na(sex_1), sex_2, sex_1),
race_2 = ifelse(is.na(race_2), race_3, race_2),
race_1 = ifelse(is.na(race_1), race_2, race_1),
student_2 = ifelse(is.na(student_2), student_3, student_2),
student_1 = ifelse(is.na(student_1), student_2, student_1)) %>%
select(id, marital_1:marital_3, sex_1:race_3, everkid_1:student_3) %>%
mutate_all(as.character) %>%
pivot_longer(marital_1:student_3) %>%
separate(name, into = c("measure", "wave")) %>%
pivot_wider(
names_from = measure,
values_from = value
) %>%
mutate(df = "2010-14 GSS")
# GSS 2016-2020 demographics ====
gss20_demog <- gss20 %>%
zap_labels() %>%
mutate(id = 1:nrow(.)) %>%
select(id, age_1a, age_1b, age_2,
marital_1a, marital_1b, marital_2,
childs_1a, childs_1b, childs_2,
babies_1a, babies_1b, babies_2,
preteen_1a, preteen_1b, preteen_2,
teens_1a, teens_1b, teens_2,
degree_1a, degree_1b, degree_2,
sex_1a, sex_1b, sex_2,
race_1a, race_1b, race_2,
wrkstat_1a, wrkstat_1b, wrkstat_2) %>%
rename(age_3 = age_2,
age_2 = age_1b,
age_1 = age_1a,
marital_3 = marital_2,
marital_2 = marital_1b,
marital_1 = marital_1a,
childs_3 = childs_2,
childs_2 = childs_1b,
childs_1 = childs_1a,
babies_3 = babies_2,
babies_2 = babies_1b,
babies_1 = babies_1a,
preteen_3 = preteen_2,
preteen_2 = preteen_1b,
preteen_1 = preteen_1a,
teens_3 = teens_2,
teens_2 = teens_1b,
teens_1 = teens_1a,
degree_3 = degree_2,
degree_2 = degree_1b,
degree_1 = degree_1a,
sex_3 = sex_2,
sex_2 = sex_1b,
sex_1 = sex_1a,
race_3 = race_2,
race_2 = race_1b,
race_1 = race_1a,
student_3 = wrkstat_2,
student_2 = wrkstat_1b,
student_1 = wrkstat_1a) %>%
mutate(age_1 = ifelse(is.na(age_1) & !is.na(age_2), age_2 - 2, age_1),
age_1 = ifelse(is.na(age_1) & !is.na(age_3), age_3 - 4, age_1)) %>%
mutate(marital_1 = recode(marital_1, "1"="married", "2"="other", "3"="other", "4"="other",
"5"="single/nm"),
marital_2 = recode(marital_2, "1"="married", "2"="other", "3"="other", "4"="other",
"5"="single/nm"),
marital_3 = recode(marital_3, "1"="married", "2"="other", "3"="other", "4"="other",
"5"="single/nm"),
race_3 = ifelse(is.na(race_1), race_2, race_1),
everkid_1 = ifelse(childs_1 > 0, 1, 0),
everkid_2 = ifelse(childs_2 > 0, 1, 0),
everkid_3 = ifelse(childs_3 > 0, 1, 0),
nkids_1 = babies_1 + preteen_1 + teens_1,
kidinhouse_1 = ifelse(nkids_1 > 0, 1, 0),
nkids_2 = babies_2 + preteen_2 + teens_2,
kidinhouse_2 = ifelse(nkids_2 > 0, 1, 0),
nkids_3 = babies_3 + preteen_3 + teens_3,
kidinhouse_3 = ifelse(nkids_3 > 0, 1, 0),
ed_1 = recode(degree_1, "0"="less than", "1"="hs", "2"="hs",
"3"="ba", "4"="ba"),
ed_2 = recode(degree_2, "0"="less than", "1"="hs", "2"="hs",
"3"="ba", "4"="ba"),
ed_3 = recode(degree_3, "0"="less than", "1"="hs", "2"="hs",
"3"="ba", "4"="ba"),
student_1 = ifelse(student_1 == 6, 1, 0),
student_2 = ifelse(student_2 == 6, 1, 0),
student_3 = ifelse(student_3 == 6, 1, 0)) %>%
#Roll-forward imputation
mutate(marital_2 = ifelse(is.na(marital_2), marital_1, marital_2),
marital_3 = ifelse(is.na(marital_3), marital_2, marital_3),
kidinhouse_2 = ifelse(is.na(kidinhouse_2), kidinhouse_1, kidinhouse_2),
kidinhouse_3 = ifelse(is.na(kidinhouse_3), kidinhouse_2, kidinhouse_3),
everkid_2 = ifelse(is.na(everkid_2), everkid_1, everkid_2),
everkid_3 = ifelse(is.na(everkid_3), everkid_2, everkid_3),
ed_2 = ifelse(is.na(ed_2), ed_1, ed_2),
ed_3 = ifelse(is.na(ed_3), ed_2, ed_3),
sex_2 = ifelse(is.na(sex_2), sex_1, sex_2),
sex_3 = ifelse(is.na(sex_3), sex_2, sex_3),
race_2 = ifelse(is.na(race_2), race_1, race_2),
race_3 = ifelse(is.na(race_3), race_2, race_3),
student_2 = ifelse(is.na(student_2), student_1, student_2),
student_3 = ifelse(is.na(student_3), student_2, student_3)) %>%
#Roll-backward imputation
mutate(marital_2 = ifelse(is.na(marital_2), marital_3, marital_2),
marital_1 = ifelse(is.na(marital_1), marital_2, marital_1),
kidinhouse_2 = ifelse(is.na(kidinhouse_2), kidinhouse_3, kidinhouse_2),
kidinhouse_1 = ifelse(is.na(kidinhouse_1), kidinhouse_2, kidinhouse_1),
everkid_2 = ifelse(is.na(everkid_2), everkid_3, everkid_2),
everkid_1 = ifelse(is.na(everkid_1), everkid_2, everkid_1),
ed_2 = ifelse(is.na(ed_2), ed_3, ed_2),
ed_1 = ifelse(is.na(ed_1), ed_2, ed_1),
sex_2 = ifelse(is.na(sex_2), sex_3, sex_2),
sex_1 = ifelse(is.na(sex_1), sex_2, sex_1),
race_2 = ifelse(is.na(race_2), race_3, race_2),
race_1 = ifelse(is.na(race_1), race_2, race_1),
student_2 = ifelse(is.na(student_2), student_3, student_2),
student_1 = ifelse(is.na(student_1), student_2, student_1)) %>%
select(id, marital_1:marital_3, sex_1:ed_3) %>%
mutate_all(as.character) %>%
pivot_longer(marital_1:ed_3) %>%
separate(name, into = c("measure", "wave")) %>%
pivot_wider(
names_from = measure,
values_from = value
) %>%
mutate(df = "2016-20 GSS")
long_demog <- bind_rows(anes5_demog,
anes7_demog,
anes8_demog,
anes90_demog,
anes9_demog,
anes0_demog,
anes16_demog,
anes20_demog,
gss6_demog,
gss8_demog,
gss10_demog,
gss20_demog) %>%
mutate(evermarried = recode(marital, "married"=1, "other"=1, "single/nm"=0),
female = recode(sex, "1"=0, "2"=1),
ba = recode(ed, "hs"=0, "less than"=0, "ba"=1),
everkid = as.numeric(everkid),
kidinhouse = as.numeric(kidinhouse),
student = as.numeric(student),
id = as.numeric(id)) %>%
select(df, id, wave, evermarried, student, everkid, kidinhouse, ba)
test <- left_join(long_scores, long_demog,
by = c("df"="df", "id"="id", "wave"="wave"))
one_obs <- test %>%
group_by(df, id, wave) %>%
slice(1) %>%
mutate(age_group = ifelse(age < 26, "18-25", ifelse(age > 25 & age < 34, "26-33",
ifelse(age > 33 & age < 65, "33-65",
"65+"))))
one_obs %>%
select(-c(name, value)) %>%
pivot_longer(evermarried:ba) %>%
group_by(df, wave, name, age_group) %>%
summarise(mean_value = weighted.mean(value,na.rm=TRUE),
date = mean(date),
n = n(),
nmiss = sum(is.na(value)))%>% #View()
ggplot(aes(x = date, y = mean_value, color = age_group)) +
facet_wrap(~name) +
geom_point() +
geom_line() +
theme_bw()
